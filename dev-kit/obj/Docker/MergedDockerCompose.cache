networks:
  pet-network:
    ipam:
      driver: default
services:
  api.gw:
    build:
      context: C:\Users\azarin.sa\Desktop\tmp\Consul
      dockerfile: Api.Gw/Dockerfile
      labels:
        app.company: lcg
        app.name: research
    container_name: lcg-research-api-gw
    environment:
      ASPNETCORE_ENVIRONMENT: Development
    image: lcg-research-api-gw/0.0.1
    networks:
      pet-network: {}
    ports:
    - published: 33310
      target: 80
  consul-server:
    command: consul agent -server -ui -node=server-1 -bootstrap-expect=1 -client='0.0.0.0'
      -data-dir=/tmp/consul
    container_name: consul-server-get-start
    environment:
      CONSUL_LOCAL_CONFIG: '{"datacenter":"east-aws","data_dir":"/opt/consul","log_level":"DEBUG","node_name":"develop","server":true}'
    image: consul:latest
    networks:
      pet-network: {}
    ports:
    - published: 8500
      target: 8500
  reverse-proxy:
    container_name: reverse-proxy
    depends_on:
    - consul-server
    image: traefik:latest
    networks:
      pet-network: {}
    ports:
    - published: 33399
      target: 5001
    - published: 33398
      target: 8080
    volumes:
    - C:\Users\azarin.sa\Desktop\tmp\Consul\.dev-env\traefik.toml:/etc/traefik/traefik.toml:rw
version: '3.4'